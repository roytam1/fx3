<?xml version="1.0"?>
<!DOCTYPE wizard SYSTEM "chrome://cckwizard/locale/cckWizard.dtd">
<bindings xmlns="http://www.mozilla.org/xbl"
         xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
  <binding id="ccklist">
    <content>
      <xul:hbox flex="1">
        <xul:vbox flex="1">
          <xul:listbox flex="1">
          </xul:listbox>
        </xul:vbox>
        <xul:vbox>
          <xul:button label="&newButton.label;" accesskey="&newButton.accesskey;" type="new"/>
          <xul:button label="&editButton.label;" accesskey="&editButton.accesskey;" type="edit"/>
          <xul:button label="&deleteButton.label;" accesskey="&deleteButton.accesskey;" type="delete"/>
          <xul:spacer flex="1"/>
        </xul:vbox>
        </xul:hbox>
    </content>
    <implementation>
      <constructor>
        document.getAnonymousNodes(this)[0].childNodes[1].childNodes[1].setAttribute("disabled","true");
	document.getAnonymousNodes(this)[0].childNodes[1].childNodes[2].setAttribute("disabled","true");
      </constructor>
      <method name="clear">
        <body>
          <![CDATA[
            var listbox=document.getAnonymousNodes(this)[0].childNodes[0].childNodes[0];
            while(listbox.getRowCount() != 0) {
              listbox.removeItemAt(0);
            }
          ]]>
        </body>
      </method>
      <method name="getRowCount">
        <body>
          <![CDATA[
            var listbox=document.getAnonymousNodes(this)[0].childNodes[0].childNodes[0];
	    return listbox.getRowCount();
          ]]>
        </body>
      </method>
      <method name="getItemAtIndex">
        <parameter name="index"/>      
        <body>
          <![CDATA[
            var listbox=document.getAnonymousNodes(this)[0].childNodes[0].childNodes[0];
	    return listbox.getItemAtIndex(index);
          ]]>
        </body>
      </method>
      <method name="appendItem">
        <parameter name="label"/>
        <parameter name="value"/>
        <body>
          <![CDATA[
            var listbox=document.getAnonymousNodes(this)[0].childNodes[0].childNodes[0];
	    return listbox.appendItem(label, value);
          ]]>
        </body>
      </method>
      <property name="selectedItem"
          onget="return document.getAnonymousNodes(this)[0].childNodes[0].childNodes[0].selectedItem;"
          onset="document.getAnonymousNodes(this)[0].childNodes[0].childNodes[0].selectedItem = val;"/>      
    </implementation>
    <handlers>
      <handler event="select">
        document.getAnonymousNodes(this)[0].childNodes[1].childNodes[1].setAttribute("disabled","false");
	document.getAnonymousNodes(this)[0].childNodes[1].childNodes[2].setAttribute("disabled","false");
      </handler>
      <handler event="dblclick">
        if (event.originalTarget.tagName == "richlistitem")
          eval(this.getAttribute("edit"));	
      </handler>
      <handler event="command">
        if (event.originalTarget.type == "delete") {
            var listbox=document.getAnonymousNodes(this)[0].childNodes[0].childNodes[0];
	    listbox.removeItemAt(listbox.selectedIndex);
	    return;
	}
	eval(this.getAttribute(event.originalTarget.type));
      </handler>
    </handlers>
  </binding>
</bindings>
