<?xml version="1.0"?>
# ***** BEGIN LICENSE BLOCK *****
# Version: MPL 1.1/GPL 2.0/LGPL 2.1
#
# The contents of this file are subject to the Mozilla Public License Version
# 1.1 (the "License"); you may not use this file except in compliance with
# the License. You may obtain a copy of the License at
# http://www.mozilla.org/MPL/
#
# Software distributed under the License is distributed on an "AS IS" basis,
# WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
# for the specific language governing rights and limitations under the
# License.
#
# The Original Code is Mozilla Communicator client code, released
# March 31, 1998.
#
# The Initial Developer of the Original Code is
# Netscape Communications Corporation.
# Portions created by the Initial Developer are Copyright (C) 1999
# the Initial Developer. All Rights Reserved.
#
# Contributor(s):
#   Ben Goodger <ben@netscape.com> (ass'td polish fixes)
#   Håkan Waara <hwaara@chello.se>
#   Neil Rashbrook <neil@parkwaycc.co.uk> (ass'td polish fix)
#
# Alternatively, the contents of this file may be used under the terms of
# either the GNU General Public License Version 2 or later (the "GPL"), or
# the GNU Lesser General Public License Version 2.1 or later (the "LGPL"),
# in which case the provisions of the GPL or the LGPL are applicable instead
# of those above. If you wish to allow use of your version of this file only
# under the terms of either the GPL or the LGPL, and not to allow others to
# use your version of this file under the terms of the MPL, indicate your
# decision by deleting the provisions above and replace them with the notice
# and other provisions required by the GPL or the LGPL. If you do not delete
# the provisions above, a recipient may use your version of this file under
# the terms of any one of the MPL, the GPL or the LGPL.
#
# ***** END LICENSE BLOCK *****

<?xml-stylesheet href="chrome://messenger/skin/messengercompose/messengercompose.css" type="text/css"?>
<?xml-stylesheet href="chrome://messenger/skin/folderMenus.css" type="text/css"?>
<?xul-overlay href="chrome://editor/content/editorOverlay.xul"?>

<!DOCTYPE window [
<!ENTITY % messengercomposeDTD SYSTEM "chrome://messenger/locale/messengercompose/messengercompose.dtd" >
%messengercomposeDTD;
<!ENTITY % brandDTD SYSTEM "chrome://branding/locale/brand.dtd" >
%brandDTD;
<!ENTITY % charsetDTD SYSTEM "chrome://global/locale/charsetOverlay.dtd" >
%charsetDTD;
]>

<window id="msgcomposeWindow"
        xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
        xmlns:nc="http://home.netscape.com/NC-rdf#"
        onunload="ComposeUnload()"
        onload="ComposeLoad()"
        onclose="return DoCommandClose()"
        onfocus="EditorOnFocus()"
        title="&msgComposeWindow.title;"
        windowtype="msgcompose"
        width="640" height="480"
        persist="screenX screenY width height sizemode"> 

<stringbundleset id="stringbundleset">
  <stringbundle id="bundle_composeMsgs" src="chrome://messenger/locale/messengercompose/composeMsgs.properties"/>
  <stringbundle id="bundle_messenger"   src="chrome://messenger/locale/messenger.properties"/>
  <stringbundle id="languageBundle"     src="chrome://global/locale/languageNames.properties"/>
</stringbundleset>

<script type="application/x-javascript" src="chrome://communicator/content/printing.js"/>
<script type="application/x-javascript" src="chrome://editor/content/editorInlineSpellCheck.js"/>
<script type="application/x-javascript" src="chrome://messenger/content/accountUtils.js"/>
<script type="application/x-javascript" src="chrome://messenger/content/widgetglue.js"/>
<script type="application/x-javascript" src="chrome://messenger/content/mailCore.js"/>
<script type="application/x-javascript" src="chrome://editor/content/editor.js"/>
<script type="application/x-javascript" src="chrome://messenger/content/messengercompose/MsgComposeCommands.js"/>

<!-- drag and drop -->
<script type="application/x-javascript" src="chrome://messenger/content/addressbook/abDragDrop.js"/>
<script type="application/x-javascript" src="chrome://global/content/nsDragAndDrop.js"/>
<script type="application/x-javascript" src="chrome://global/content/nsTransferable.js"/>

<!-- move needed functions into a single js file -->
<script type="application/x-javascript" src="chrome://messenger/content/messengercompose/addressingWidgetOverlay.js"/>
<script type="application/x-javascript" src="chrome://global/content/charsetOverlay.js"/>
<script type="application/x-javascript" src="chrome://global/content/globalOverlay.js"/>
<script type="application/x-javascript" src="chrome://communicator/content/utilityOverlay.js"/>

<commandset id="composeCommands">
  <commandset id="msgComposeCommandUpdate"
              commandupdater="true"
              events="focus"
              oncommandupdate="CommandUpdate_MsgCompose()"/>
  <commandset id="globalEditMenuItems"
              commandupdater="true"
              events="focus"
              oncommandupdate="goUpdateGlobalEditMenuItems()"/>
  <commandset id="selectEditMenuItems"
              commandupdater="true"
              events="select"
              oncommandupdate="goUpdateSelectEditMenuItems()"/>
  <commandset id="undoEditMenuItems"
              commandupdater="true"
              events="undo"
              oncommandupdate="goUpdateUndoEditMenuItems()"/>
  <commandset id="clipboardEditMenuItems"
              commandupdater="true"
              events="clipboard"
              oncommandupdate="goUpdatePasteMenuItems()"/>

  <commandset id="commonEditorMenuItems"/>
  <commandset id="composerMenuItems"/>
  <commandset id="composerEditMenuItems"/> 
  <commandset id="composerStyleMenuItems"/>
  <commandset id="composerTableMenuItems"/>
  <commandset id="composerListMenuItems"/>
  <!-- File Menu -->
  <command id="cmd_new" oncommand="goDoCommand('cmd_newMessage')"/>
  <command id="cmd_attachFile" oncommand="goDoCommand('cmd_attachFile')"/>
  <command id="cmd_attachPage" oncommand="goDoCommand('cmd_attachPage')"/>
  <command id="cmd_attachVCard" checked="false" oncommand="ToggleAttachVCard(event.target)"/>
  <command id="cmd_close" oncommand="goDoCommand('cmd_close')"/>
  <command id="cmd_saveDefault" oncommand="goDoCommand('cmd_saveDefault')"/>
  <command id="cmd_saveAsFile" oncommand="goDoCommand('cmd_saveAsFile')"/>
  <command id="cmd_saveAsDraft" oncommand="goDoCommand('cmd_saveAsDraft')"/>
  <command id="cmd_saveAsTemplate" oncommand="goDoCommand('cmd_saveAsTemplate')"/>
  <command id="cmd_sendButton" oncommand="goDoCommand('cmd_sendButton')"/>
  <command id="cmd_sendNow" oncommand="goDoCommand('cmd_sendNow')"/>
  <command id="cmd_sendWithCheck" oncommand="goDoCommand('cmd_sendWithCheck')"/>
  <command id="cmd_sendLater" oncommand="goDoCommand('cmd_sendLater')"/>
  <command id="cmd_printSetup" oncommand="goDoCommand('cmd_printSetup')"/>
  <command id="cmd_print" oncommand="goDoCommand('cmd_print')"/>

  <!-- Edit Menu -->
  <!--command id="cmd_pasteQuote"/  DO NOT INCLUDE THOSE PBROCASTER ESLE THE EDIT MENU WILL BE BROKEN! -->
  <!--command id="cmd_find"/-->
  <!--command id="cmd_findNext"/-->
  <command id="cmd_undo" oncommand="goDoCommand('cmd_undo')" disabled="true"/>
  <command id="cmd_redo" oncommand="goDoCommand('cmd_redo')" disabled="true"/>
  <command id="cmd_cut" oncommand="goDoCommand('cmd_cut')" disabled="true"/>
  <command id="cmd_copy" oncommand="goDoCommand('cmd_copy')" disabled="true"/>
  <command id="cmd_paste" oncommand="goDoCommand('cmd_paste')" disabled="true"/>
  <command id="cmd_rewrap" oncommand="goDoCommand('cmd_rewrap')"/>
  <command id="cmd_delete" oncommand="goDoCommand('cmd_delete')" valueDefault="&deleteCmd.label;" disabled="true"/>
  <command id="cmd_selectAll" oncommand="goDoCommand('cmd_selectAll')" disabled="true"/>
  <command id="cmd_openAttachment" oncommand="goDoCommand('cmd_openAttachment')" disabled="true"/>  
  <command id="cmd_account" oncommand="goDoCommand('cmd_account')"/>

  <!-- View Menu -->
  <command id="cmd_showComposeToolbar" oncommand="goDoCommand('cmd_showComposeToolbar')"/>
  <command id="cmd_showFormatToolbar" oncommand="goDoCommand('cmd_showFormatToolbar')"/>
  
  <!-- Options Menu -->
  <command id="cmd_quoteMessage" oncommand="goDoCommand('cmd_quoteMessage')"/>
  <command id="cmd_insert"/>

#ifdef XP_MACOSX
  <!-- Mac Window menu -->
  <command id="minimizeWindow" label="&minimizeWindow.label;" oncommand="window.minimize();"/>
  <command id="zoomWindow" label="&zoomWindow.label;" oncommand="zoomWindow();"/>
  <command id="Tasks:Mail" oncommand="toMessengerWindow();"/>
  <command id="Tasks:AddressBook" oncommand="toAddressBook();"/>
#endif

</commandset>

<broadcasterset id="composeBroadcasters">
  <broadcaster id="Editor:Throbber" busy="false"/>
  <broadcaster id="Communicator:WorkMode" label="&offlineGoOfflineCmd.label;"
               type="checkbox" oncommand="toggleOfflineStatus();"/>
  <broadcaster id="args" value="editorType=default"/>
  <broadcaster id="viewAddressPicker" autoCheck="false" type="checkbox" oncommand="toggleAddressPicker();"/>
</broadcasterset>

<keyset id="tasksKeys">
  <!-- File Menu -->
#ifdef XP_MACOSX
  <key id="key_newMessage" key="&newMessage.key;" oncommand="goOpenNewMessage();" modifiers="accel,shift"/>
  <key id="key_newMessage2" key="&newMessageCmd2.key;" oncommand="goOpenNewMessage();" modifiers="accel,shift"/>
#else
  <key id="key_newMessage" key="&newMessage.key;" oncommand="goOpenNewMessage();" modifiers="accel"/>
  <key id="key_newMessage2" key="&newMessageCmd2.key;" oncommand="goOpenNewMessage();" modifiers="accel"/>
#endif
  <key id="key_close" key="&closeCmd.key;" command="cmd_close"  modifiers="accel"/>
  <key id="key_save" key="&saveCmd.key;" command="cmd_saveDefault" modifiers="accel"/>
  <key id="key_send" keycode="&sendCmd.keycode;" observes="cmd_sendWithCheck" modifiers="accel"/>
  <key id="key_sendLater" keycode="&sendLaterCmd.keycode;" observes="cmd_sendLater" modifiers="accel, shift"/>
  <key id="key_print" key="&printCmd.key;" command="cmd_print" modifiers="accel"/>
  <key id="key_quit" oncommand="goQuitApplication();"  key="&quitApplicationCmd.key;" modifiers="accel"/>
  
  <!-- Edit Menu -->
  <key id="key_undo" key="&undoCmd.key;" modifiers="accel"/>
  <key id="key_redo" key="&redoCmd.key;" modifiers="accel"/>
  <key id="key_cut" key="&cutCmd.key;" modifiers="accel"/>
  <key id="key_copy" key="&copyCmd.key;" modifiers="accel"/>
  <key id="key_paste" key="&pasteCmd.key;" modifiers="accel"/>
  <key id="key_rewrap" key="&editRewrapCmd.key;" modifiers="accel"/>
  <key id="key_delete" keycode="VK_DELETE"/>
  <key id="key_selectAll" key="&selectAllCmd.key;" modifiers="accel"/>
  <key id="key_find" key="&findCmd.key;" command="cmd_find" modifiers="accel"/>
  <key id="key_findNext" key="&findAgainCmd.key;" command="cmd_findNext" modifiers="accel"/>
  <key id="key_findPrev" key="&findPrevCmd.key;" command="cmd_findPrev" modifiers="accel, shift"/>
  <key keycode="&findAgainCmd.key2;" command="cmd_findNext"/>
  <key keycode="&findPrevCmd.key2;"  command="cmd_findPrev" modifiers="shift"/>
  
  <!-- Options Menu -->
#ifdef XP_UNIX
  <key id="key_checkspelling" key="&checkSpellingCmd.key;" command="cmd_spelling" modifiers="accel, shift"/>
#else
  <key id="key_checkspelling" key="&checkSpellingCmd.key;" command="cmd_spelling" modifiers="accel"/>
#endif

#ifdef XP_WIN
  <key keycode="&checkSpellingCmd.key2;" command="cmd_spelling"/>
#endif

   <!-- Tools Menu -->
  <key id="key_mail"  key="&messengerCmd.commandkey;" oncommand="toMessengerWindow();" modifiers="accel"/>
  <key id="key_addressbook"  key="&addressBookCmd.commandkey;" oncommand="toAddressBook();" modifiers="accel"/>
  
  <!-- Tab/F6 Keys -->
  <key keycode="VK_TAB" oncommand="SwitchElementFocus(event);" modifiers="control"/>
  <key keycode="VK_TAB" oncommand="SwitchElementFocus(event);" modifiers="control,shift"/>
  <key keycode="VK_F6" oncommand="SwitchElementFocus(event);" modifiers="control"/>
  <key keycode="VK_F6" oncommand="SwitchElementFocus(event);" modifiers="control,shift"/>
  <key keycode="VK_F6" oncommand="SwitchElementFocus(event);" modifiers="shift"/>
  <key keycode="VK_F6" oncommand="SwitchElementFocus(event);"/>

#ifdef XP_MACOSX
  <!-- Mac Window Menu -->
  <key id="key_minimizeWindow" command="minimizeWindow" key="&minimizeWindow.key;" modifiers="accel"/>
  <key id="key_macHelp" key="&hintsAndTipsMac.commandkey;" oncommand="openRegionURL('mailnews.hints_and_tips.url');" modifiers="accel"/>
#endif

</keyset>

<keyset id="editorKeys"/>

<popup id="msgComposeContext"
    onpopupshowing="openEditorContextMenu();">
  
  <menuitem id="spellCheckNoSuggestions" label="&spellCheckNoSuggestions.label;" disabled="true"/>
  <menuseparator id="spellCheckAddSep"/>
  <menuitem id="spellCheckAddToDictionary" label="&spellCheckAddToDictionary.label;" accesskey="&spellCheckAddToDictionary.accesskey;"
            oncommand="InlineSpellChecker.addToDictionary(null,null);"/>  
  <menuitem id="spellCheckIgnoreWord" label="&spellCheckIgnoreWord.label;" accesskey="&spellCheckIgnoreWord.accesskey;"
            oncommand="InlineSpellChecker.ignoreWord(null, null)"/>  
  <menuseparator id="spellCheckSuggestionsSeparator"/>

  <menuitem label="&undo.label;" accesskey="&undo.accesskey;" command="cmd_undo"/>
  <menuitem label="&cut.label;" accesskey="&cut.accesskey;" command="cmd_cut"/>
  <menuitem label="&copy.label;" accesskey="&copy.accesskey;" command="cmd_copy"/>
  <menuitem label="&paste.label;" accesskey="&paste.accesskey;" command="cmd_paste"/>
  <menuitem command="cmd_pasteNoFormatting"/>
  <menuitem label="&pasteQuote.label;" accesskey="&pasteQuote.accesskey;" command="cmd_pasteQuote"/>
  <menuitem label="&delete.label;" accesskey="&delete.accesskey;" command="cmd_delete"/>
  <menuseparator/>
  <menuitem label="&selectAll.label;" accesskey="&selectAll.accesskey;" command="cmd_selectAll"/>
</popup>

<popup id="msgComposeAttachmentContext" onpopupshowing="updateEditItems();">
  <menuitem label="&openAttachment.label;" accesskey="&openAttachment.accesskey;" command="cmd_openAttachment"/>
  <menuitem label="&delete.label;" accesskey="&delete.accesskey;" command="cmd_delete"/>
  <menuitem label="&selectAll.label;" accesskey="&selectAll.accesskey;" command="cmd_selectAll"/>
  <menuseparator/>
  <menuitem label="&attachFile.label;" accesskey="&attachFile.accesskey;" command="cmd_attachFile"/>
  <menuitem label="&attachPage.label;" accesskey="&attachPage.accesskey;" command="cmd_attachPage"/>
</popup>

<popup id="aTooltip" class="tooltip" onpopupshowing="return FillInTooltip(document.tooltipNode);" > 
  <label id="TOOLTIP-tooltipText" class="tooltip-label" flex="1"/>
</popup>

<popup id="toolbar-context-menu">
  <menuitem oncommand="CustomizeMailToolbar('compose-toolbox');" id="CustomizeMailToolbar" label="&customizeToolbar.label;" accesskey="&customizeToolbar.accesskey;"/>
</popup>

  <toolbox id="compose-toolbox" class="toolbox-top" mode="full"> 

  <!-- Menu -->
  <!-- if you change the id of the menubar, be sure to update mailCore.js::CustomizeMailToolbar and MailToolboxCustomizeDone -->
  <toolbar type="menubar" id="compose-toolbar-menubar2" class="chromeclass-menubar" customizable="true"
#ifdef XP_MACOSX
           defaultset="menubar-items"
#else
          defaultset="menubar-items,spring,throbber-box"
#endif
           context="toolbar-context-menu" mode="full">

     <toolbaritem id="menubar-items" align="center">
      <menubar id="mail-menubar" style="border:0px;padding:0px;margin:0px;-moz-appearance:none">
      <menu id="menu_File" label="&fileMenu.label;" accesskey="&fileMenu.accesskey;">
        <menupopup id="menu_FilePopup">
          <menu id="menu_New" label="&newMenu.label;" accesskey="&newMenu.accesskey;">
            <menupopup id="menu_NewPopup">
              <menuitem label="&newMessage.label;" accesskey="&newMessage.accesskey;" key="key_newMessage" oncommand="goOpenNewMessage();"/>
              <menuseparator/>
              <menuitem label="&newCard.label;" accesskey="&newCard.accesskey;"
                        oncommand="window.openDialog('chrome://messenger/content/addressbook/abNewCardDialog.xul', '', 'chrome,resizable=no,titlebar,modal');"/>
            </menupopup>
          </menu>
          <menu label="&attachMenu.label;" accesskey="&attachMenu.accesskey;">
            <menupopup>
              <menuitem label="&attachFileCmd.label;" accesskey="&attachFileCmd.accesskey;" command="cmd_attachFile"/>
              <menuitem label="&attachPageCmd.label;" accesskey="&attachPageCmd.accesskey;" command="cmd_attachPage"/>
              <menuseparator/>
              <menuitem type="checkbox" label="&attachVCardCmd.label;" accesskey="&attachVCardCmd.accesskey;" command="cmd_attachVCard"/>
            </menupopup>
          </menu>
          <menuitem id="offlineGoOfflineCmd" hidden="true" label="&offlineGoOfflineCmd.label;" accesskey="&offlineGoOfflineCmd.accesskey;" observes="Communicator:WorkMode"/>
          <menuitem id="menu_close" label="&closeCmd.label;" key="key_close" accesskey="&closeCmd.accesskey;" command="cmd_close"/>
          <menuseparator/>
          <menuitem label="&saveCmd.label;" accesskey="&saveCmd.accesskey;" key="key_save" command="cmd_saveDefault"/>
          <menu label="&saveAsCmd.label;" accesskey="&saveAsCmd.accesskey;">
            <menupopup>
              <menuitem label="&saveAsFileCmd.label;" accesskey="&saveAsFileCmd.accesskey;" command="cmd_saveAsFile"/>
              <menuseparator/>
              <menuitem label="&saveAsDraftCmd.label;" accesskey="&saveAsDraftCmd.accesskey;" command="cmd_saveAsDraft"/>
              <menuitem label="&saveAsTemplateCmd.label;" accesskey="&saveAsTemplateCmd.accesskey;" command="cmd_saveAsTemplate"/>
            </menupopup>
          </menu>
          <menuseparator/>
          <menuitem label="&sendNowCmd.label;" accesskey="&sendNowCmd.accesskey;" key="key_send" command="cmd_sendNow" id="menu-item-send-now"/>
          <menuitem label="&sendLaterCmd.label;" accesskey="&sendLaterCmd.accesskey;" key="key_sendLater" command="cmd_sendLater"/>
          <menuseparator/>
          <menuitem id="printSetupMenuItem" label="&printSetupCmd.label;" accesskey="&printSetupCmd.accesskey;" command="cmd_printSetup"/>
          <menuitem id="printMenuItem" label="&printCmd.label;" accesskey="&printCmd.accesskey;" key="key_print" command="cmd_print"/>
          <menuseparator id="menu_FileQuitSeparator"/>

          <menuitem  id="menu_FileQuitItem" key="key_quit" oncommand="goQuitApplication();" 
#ifdef XP_WIN
          label="&quitApplicationCmdWin.label;" accesskey="&quitApplicationCmdWin.accesskey;"/>
#else
          label="&quitApplicationCmd.label;" accesskey="&quitApplicationCmd.accesskey;"/>
#endif
        </menupopup>
      </menu>
      
      <menu id="menu_Edit" label="&editMenu.label;" accesskey="&editMenu.accesskey;">
        <menupopup onpopupshowing="updateEditItems();">
          <menuitem id="menu_undo" label="&undoCmd.label;" key="key_undo" accesskey="&undoCmd.accesskey;" command="cmd_undo"/>
          <menuitem id="menu_redo" label="&redoCmd.label;" key="key_redo" accesskey="&redoCmd.accesskey;" command="cmd_redo"/>
          <menuseparator/>
          <menuitem id="menu_cut" label="&cutCmd.label;" key="key_cut" accesskey="&cutCmd.accesskey;" command="cmd_cut"/>
          <menuitem id="menu_copy" label="&copyCmd.label;" key="key_copy" accesskey="&copyCmd.accesskey;" command="cmd_copy"/>
          <menuitem id="menu_paste" label="&pasteCmd.label;" key="key_paste" accesskey="&pasteCmd.accesskey;" command="cmd_paste"/>
          <menuitem id="menu_pasteNoFormatting" command="cmd_pasteNoFormatting"/>
          <menuitem id="menu_pasteQuote"/>
          <menuitem id="menu_rewrap" label="&editRewrapCmd.label;" key="key_rewrap" accesskey="&editRewrapCmd.accesskey;" command="cmd_rewrap"/>
          <menuitem id="menu_delete" label="&deleteCmd.label;" key="key_delete" accesskey="&deleteCmd.accesskey;" command="cmd_delete"/>
          <menuseparator/>
          <menuitem id="menu_selectAll" label="&selectAllCmd.label;" key="key_selectAll" accesskey="&selectAllCmd.accesskey;" command="cmd_selectAll"/>
          <menuseparator/>
          <menuitem label="&findCmd.label;"      key="key_find"      accesskey="&findCmd.accesskey;"      command="cmd_find"/>
          <menuitem label="&findAgainCmd.label;" key="key_findNext" accesskey="&findAgainCmd.accesskey;" command="cmd_findNext"/>
          <menuitem label="&findPrevCmd.label;"  key="key_findPrev" accesskey="&findPrevCmd.accesskey;"  command="cmd_findPrev"/>
#ifdef XP_UNIX
#ifndef XP_MACOSX
          <menuseparator id="prefSep"/>
          <menuitem label="&accountManagerCmd.label;" accesskey="&accountManagerCmdUnix.accesskey;" command="cmd_account"/>
          <menuitem id="menu_preferences" label="&preferencesCmdUnix.label;" accesskey="&preferencesCmdUnix.accesskey;"
                    oncommand="openOptionsDialog('paneCompose');"/>
#endif
#endif
        </menupopup>
      </menu>

      <menu id="menu_View" label="&viewMenu.label;" accesskey="&viewMenu.accesskey;">
        <menupopup id="menu_View_Popup">
          <menu id="menu_ToolbarsNew" label="&viewToolbarsMenuNew.label;" accesskey="&viewToolbarsMenuNew.accesskey;">
            <menupopup>
              <menuitem id="menu_showComposeToolbar"
                        type="checkbox"
                        label="&showComposeToolbarCmd.label;"
                        oncommand="onViewToolbarCommand('composeToolbar2', 'menu_showComposeToolbar');"
                        accesskey="&showComposeToolbarCmd.accesskey;"
                        checked="true"/>
              <menuitem id="menu_showFormatToolbar"
                        type="checkbox"
                        label="&showFormatToolbarCmd.label;"
                        command="cmd_showFormatToolbar"
                        accesskey="&showFormatToolbarCmd.accesskey;"
                        checked="true"/>
              <menuitem id="menu_showTaskbar"
                        type="checkbox"
                        label="&showTaskbarCmd.label;"
                        accesskey="&showTaskbarCmd.accesskey;"
                        oncommand="goToggleToolbar('status-bar', 'menu_showTaskbar')"
                        checked="true"/>
              <menuseparator/>
              <menuitem id="menu_customizeToolbar" oncommand="CustomizeMailToolbar('compose-toolbox');" label="&customizeToolbar.label;" accesskey="&customizeToolbar.accesskey;"/>
                    
            </menupopup>
          </menu>

          <menuitem id="menu_AddressSidebar" label="&addressSidebar.label;" accesskey="&addressSidebar.accesskey;" observes="viewAddressPicker"/>
        </menupopup>
      </menu>
  
      <menu id="insertMenu" command="cmd_renderedHTMLEnabler"/>

      <menu id="formatMenu" label="&formatMenu.label;" accesskey="&formatMenu.accesskey;" command="cmd_renderedHTMLEnabler">
        <menupopup id="formatMenuPopup">
          <menu id="tableMenu"/>
          <menuseparator/>
          <menuitem id="objectProperties"/>
          <menuitem id="colorsAndBackground"/>
        </menupopup>
      </menu>
  
      <menu id="optionsMenu" label="&optionsMenu.label;" accesskey="&optionsMenu.accesskey;">
        <menupopup id="optionsMenuPopup"> 
          <menuitem label="&checkSpellingCmd.label;" id="menu_checkspelling" accesskey="&checkSpellingCmd.accesskey;" key="key_checkspelling" command="cmd_spelling"/>
          <menuitem label="&enableInlineSpellChecker.label;" id="menu_inlineSpellCheck" 
                           accesskey="&enableInlineSpellChecker.accesskey;" checked="false"
                           type="checkbox" oncommand="ToggleInlineSpellChecker(event.target)"/>
          <menuitem label="&quoteCmd.label;" accesskey="&quoteCmd.accesskey;" command="cmd_quoteMessage"/>
          <menuseparator/>
          <menuitem id="returnReceiptMenu" type="checkbox" label="&returnReceiptMenu.label;" accesskey="&returnReceiptMenu.accesskey;" checked="false" oncommand="ToggleReturnReceipt(event.target)"/>
          <menuseparator/>
          <menu id="maileditCharsetMenu" label="&charsetMenu.label;" accesskey="&charsetMenu.accesskey;" datasources="rdf:charset-menu" ref="NC:MaileditCharsetMenuRoot" oncommand="SetDocumentCharacterSet(event.target.getAttribute('id'));" onpopupshowing="CreateMenu('mailedit');InitCharsetMenuCheckMark();" onpopupshown="CreateMenu('more-menu');">
            <template>
              <rule>
                <menupopup>
                  <menuitem type="radio" name="charsetGroup" checked="rdf:http://home.netscape.com/NC-rdf#Checked" uri="..." label="rdf:http://home.netscape.com/NC-rdf#Name"/>
                </menupopup>
              </rule>
            </template>

            <menupopup>
              <menuitem name="charsetCustomize" accesskey="&charsetCustomize.accesskey;" label="&charsetCustomize.label;" oncommand="window.openDialog('chrome://global/content/customizeCharset.xul','PrefWindow', 'chrome,modal=yes,resizable=yes', 'mailedit')"/>
              <menuseparator />
            </menupopup>
          </menu>
          <menu id="outputFormatMenu" label="&outputFormatMenu.label;" accesskey="&outputFormatMenu.accesskey;" oncommand="OutputFormatMenuSelect(event.target)">
            <menupopup>
              <menuitem type="radio" name="output_format" label="&autoFormatCmd.label;" accesskey="&autoFormatCmd.accesskey;" id="format_auto" checked="true"/>
              <menuitem type="radio" name="output_format" label="&plainTextFormatCmd.label;" accesskey="&plainTextFormatCmd.accesskey;" id="format_plain"/>
              <menuitem type="radio" name="output_format" label="&htmlFormatCmd.label;" accesskey="&htmlFormatCmd.accesskey;" id="format_html"/>
              <menuitem type="radio" name="output_format" label="&bothFormatCmd.label;" accesskey="&bothFormatCmd.accesskey;" id="format_both"/>
            </menupopup>
          </menu>
          <menu id="priorityMenu" label="&priorityMenu.label;" accesskey="&priorityMenu.accesskey;" onpopupshowing="updatePriorityMenu();" oncommand="PriorityMenuSelect(event.target);">
            <menupopup>
              <menuitem type="radio" name="priority" label="&highestPriorityCmd.label;" accesskey="&highestPriorityCmd.accesskey;" value="Highest" id="priority_highest"/>
              <menuitem type="radio" name="priority" label="&highPriorityCmd.label;" accesskey="&highPriorityCmd.accesskey;" value="High" id="priority_high"/>
              <menuitem type="radio" name="priority" label="&normalPriorityCmd.label;" accesskey="&normalPriorityCmd.accesskey;" value="Normal" id="priority_normal" checked="true"/>
              <menuitem type="radio" name="priority" label="&lowPriorityCmd.label;" accesskey="&lowPriorityCmd.accesskey;" value="Low" id="priority_low"/>
              <menuitem type="radio" name="priority" label="&lowestPriorityCmd.label;" accesskey="&lowestPriorityCmd.accesskey;" value="Lowest"  id="priority_lowest"/>              
            </menupopup>
          </menu>
          <menu id="fccMenu" label="&fileCarbonCopyCmd.label;" 
             accesskey="&fileCarbonCopyCmd.accesskey;" 
             sortResource="http://home.netscape.com/NC-rdf#FolderTreeName"
             sortDirection="ascending"
             datasources="rdf:msgaccountmanager rdf:mailnewsfolders" 
             ref="msgaccounts:/">
            <menupopup/>
            <template> 
              <rule nc:CanFileMessages="true" iscontainer="true" isempty="false">
                <menupopup>
                  <!--menuitem label="[current selection]" disabled="true"/>
                  <menuseparator/-->
                  <menu uri="..."  class="folderMenuItem menu-iconic" label="rdf:http://home.netscape.com/NC-rdf#Name"
                        SpecialFolder="rdf:http://home.netscape.com/NC-rdf#SpecialFolder"
                        BiffState="rdf:http://home.netscape.com/NC-rdf#BiffState"
                        IsServer="rdf:http://home.netscape.com/NC-rdf#IsServer"
                        IsSecure="rdf:http://home.netscape.com/NC-rdf#IsSecure"
                        ServerType="rdf:http://home.netscape.com/NC-rdf#ServerType">
                    <menupopup>
                      <menuitem label="&fileHereMenu.label;"
                                oncommand="MessageFcc(event.target.parentNode.parentNode)"/>
                      <menuseparator/>
                    </menupopup>
                  </menu>
                </menupopup>
              </rule>
              <rule nc:CanFileMessagesOnServer="false"/>
              <rule nc:CanFileMessages="false" iscontainer="true" isempty="false">
                <menupopup>
                  <menu uri="..."  class="folderMenuItem menu-iconic" label="rdf:http://home.netscape.com/NC-rdf#Name"
                        SpecialFolder="rdf:http://home.netscape.com/NC-rdf#SpecialFolder"
                        BiffState="rdf:http://home.netscape.com/NC-rdf#BiffState"
                        IsServer="rdf:http://home.netscape.com/NC-rdf#IsServer"
                        IsSecure="rdf:http://home.netscape.com/NC-rdf#IsSecure"
                        ServerType="rdf:http://home.netscape.com/NC-rdf#ServerType">
                    <menupopup/>
                  </menu>
                </menupopup>
              </rule>
              <rule nc:CanFileMessages="true">
                <menupopup>
                  <menuitem uri="..." class="folderMenuItem menuitem-iconic" label="rdf:http://home.netscape.com/NC-rdf#Name"
                            oncommand="MessageFcc(event.target)" 
                            SpecialFolder="rdf:http://home.netscape.com/NC-rdf#SpecialFolder"
                            BiffState="rdf:http://home.netscape.com/NC-rdf#BiffState"
                            IsServer="rdf:http://home.netscape.com/NC-rdf#IsServer"
                            IsSecure="rdf:http://home.netscape.com/NC-rdf#IsSecure"
                            ServerType="rdf:http://home.netscape.com/NC-rdf#ServerType"/>
                </menupopup>
              </rule>
            </template>
          </menu>    
        </menupopup>
      </menu>

      <menu id="tasksMenu" label="&tasksMenu.label;" accesskey="&tasksMenu.accesskey;">
          <menupopup id="taskPopup">
            <!-- Moving the first two items to the Window menu on the Mac -->
#ifndef XP_MACOSX
            <menuitem accesskey="&messengerCmd.accesskey;" label="&messengerCmd.label;"  key="key_mail" oncommand="toMessengerWindow();" id="tasksMenuMail" class="menuitem-iconic icon-mail16 menu-iconic"/>
            <menuitem label="&addressBookCmd.label;" accesskey="&addressBookCmd.accesskey;" key="key_addressbook" oncommand="toAddressBook();" id="tasksMenuAddressBook" class="menuitem-iconic icon-addressbook16 menu-iconic"/>
#endif

#ifndef XP_UNIX
            <menuseparator id="prefSep"/>
            <menuitem label="&accountManagerCmd.label;" accesskey="&accountManagerCmd.accesskey;" command="cmd_account"/>
            <menuitem id="menu_preferences" label="&preferencesCmd.label;" accesskey="&preferencesCmd.accesskey;"
                      oncommand="openOptionsDialog('paneCompose');"/>
#else
#ifdef XP_MACOSX
            <menuitem label="&accountManagerCmd.label;" accesskey="&accountManagerCmd.accesskey;" command="cmd_account"/>
            <menuitem id="menu_preferences" label="&preferencesCmd.label;" accesskey="&preferencesCmd.accesskey;"
                      oncommand="openOptionsDialog('paneCompose');"/>
#endif
#endif
         </menupopup>
      </menu>

#ifdef XP_MACOSX
      <menu id="windowMenu" label="&windowMenu.label;"
          datasources="rdf:window-mediator" ref="NC:WindowMediatorRoot"
          onpopupshown="checkFocusedWindow();">
          <template>
          <rule>
              <menupopup>
              <menuitem uri="rdf:*" label="rdf:http://home.netscape.com/NC-rdf#Name" type="radio" name="windowList" oncommand="ShowWindowFromResource(event.target)"/>
              </menupopup>
          </rule>
          </template>
          <menupopup id="windowPopup">
            <menuitem command="minimizeWindow" key="key_minimizeWindow"/>
            <menuitem command="zoomWindow"/>
            <menuseparator/>
              <menuitem accesskey="&messengerCmd.accesskey;" label="&messengerCmd.label;"  key="key_mail" command="Tasks:Mail" id="tasksMenuMail" class="menuitem-iconic icon-mail16 menu-iconic"/>
              <menuitem label="&addressBookCmd.label;" accesskey="&addressBookCmd.accesskey;" key="key_addressbook" command="Tasks:AddressBook" id="tasksMenuAddressBook" class="menuitem-iconic icon-addressbook16 menu-iconic"/>
            <menuseparator id="sep-window-list"/>
          </menupopup>
      </menu>
#endif
      
      <menu label="&helpMenu.label;" accesskey="&helpMenu.accesskey;">
        <menupopup id="menu_HelpPopup">
#ifdef XP_MACOSX
          <menuitem id="hintsAndTips" label="&hintsAndTips.label;" key="key_macHelp" oncommand="openRegionURL('mailnews.hints_and_tips.url');"/>
          <menuitem id="releaseNotes" accesskey="&releaseCmd.accesskey;" label="&releaseCmd.label;" oncommand="openRegionURL('releaseNotesURL');"/>
#else
          <menuitem id="releaseNotes" accesskey="&releaseCmd.accesskey;" label="&releaseCmd.label;" oncommand="openRegionURL('releaseNotesURL');"/>
          <menuitem id="hintsAndTips" accesskey="&hintsAndTips.accesskey;" label="&hintsAndTips.label;" oncommand="openRegionURL('mailnews.hints_and_tips.url');"/>
          <menuseparator id="menu_HelpAboutSeparator"/>
#endif
          <menuitem id="aboutName" accesskey="&aboutCmd.accesskey;"
                    label="&aboutCmd.label;"
#ifdef XP_MACOSX
                    hidden="true"
#endif
                    oncommand="openAboutDialog();"/>
        </menupopup>
      </menu>
    </menubar>
   </toolbaritem>
  </toolbar>

  <toolbarpalette id="MsgComposeToolbarPalette">
    
    <toolbarbutton class="toolbarbutton-1"
               id="button-send" label="&sendButton.label;"
               tooltiptext="&sendButton.tooltip;" 
               command="cmd_sendButton"
               now_label="&sendButton.label;"
               now_tooltiptext="&sendButton.tooltip;"
               later_label="&sendLaterCmd.label;"
               later_tooltiptext="&sendlaterButton.tooltip;">
      <observes element="Communicator:WorkMode" attribute="offline"/>
    </toolbarbutton>
    
    <toolbarbutton class="toolbarbutton-1"
               id="button-address" label="&addressButton.label;" 
               tooltiptext="&addressButton.tooltip;" 
               observes="viewAddressPicker"/>
    
    <toolbarbutton class="toolbarbutton-1" type="menu-button"
               id="button-attach" label="&attachButton.label;" 
               tooltiptext="&attachButton.tooltip;" 
               command="cmd_attachFile"
               ondragover="nsDragAndDrop.dragOver(event, envelopeDragObserver);"
               ondragdrop="nsDragAndDrop.drop(event, envelopeDragObserver);"
               ondragexit="nsDragAndDrop.dragExit(event, envelopeDragObserver);">
         <menupopup>
            <menuitem label="&attachFileCmd.label;" accesskey="&attachFileCmd.accesskey;" command="cmd_attachFile"/>
            <menuitem label="&attachPageCmd.label;" accesskey="&attachPageCmd.accesskey;" command="cmd_attachPage"/>
           <menuseparator/>
           <menuitem type="checkbox" label="&attachVCardCmd.label;" accesskey="&attachVCardCmd.accesskey;" command="cmd_attachVCard"/>
         </menupopup>
    </toolbarbutton>
    
    <toolbarbutton class="toolbarbutton-1" type="menu-button"
               id="spellingButton" label="&spellingButton.label;" 
               command="cmd_spelling">
      <menupopup id="LanguageMenulist" onpopupshowing="onShowDictionaryMenu();">
        <!-- this popup gets dynamically generated -->
      </menupopup>
    </toolbarbutton>
    
    <toolbarbutton class="toolbarbutton-1" type="menu-button"
               id="button-save" label="&saveButton.label;" 
               tooltiptext="&saveButton.tooltip;" 
               command="cmd_saveDefault">
         <menupopup>
           <menuitem label="&saveAsFileCmd.label;" accesskey="&saveAsFileCmd.accesskey;" command="cmd_saveAsFile"/>
           <menuseparator/>
           <menuitem label="&saveAsDraftCmd.label;" accesskey="&saveAsDraftCmd.accesskey;" command="cmd_saveAsDraft"/>
           <menuitem label="&saveAsTemplateCmd.label;" accesskey="&saveAsTemplateCmd.accesskey;" command="cmd_saveAsTemplate"/>
         </menupopup>
    </toolbarbutton>

    <toolbarbutton class="toolbarbutton-1"
               id="quoteButton" label="&quoteButton.label;" 
               tooltiptext="&quoteButton.tooltip;" 
               command="cmd_quoteMessage"/>

    <toolbarbutton id="cut-button" class="toolbarbutton-1"
                   label="&cutCmd.label;"
                   command="cmd_cut"
                   tooltiptext="&cutButton.tooltip;"/>
    <toolbarbutton id="copy-button" class="toolbarbutton-1"
                   label="&copyCmd.label;"
                   command="cmd_copy"
                   tooltiptext="&copyButton.tooltip;"/>
    <toolbarbutton id="paste-button" class="toolbarbutton-1"
                   label="&pasteCmd.label;"
                   command="cmd_paste"
                   tooltiptext="&pasteButton.tooltip;"/>

    <toolbaritem id="priority-button" align="center" pack="center">
      <label value="&priorityButton.label;"/>
      <menulist id="priorityMenu-button" value="Normal" oncommand="PriorityMenuSelect(event.target);">
        <menupopup>
          <menuitem name="priority" label="&highestPriorityCmd.label;" value="Highest"  id="list_priotity_highest"/>
          <menuitem name="priority" label="&highPriorityCmd.label;"    value="High"     id="list_priority_high"/>
          <menuitem name="priority" label="&normalPriorityCmd.label;"  value="Normal"   id="list_priority_normal"/>
          <menuitem name="priority" label="&lowPriorityCmd.label;"     value="Low"      id="list_priority_low"/>
          <menuitem name="priority" label="&lowestPriorityCmd.label;"  value="Lowest"   id="list_priority_lowest"/>
        </menupopup>
      </menulist>
    </toolbaritem>

    <toolbaritem id="throbber-box" title="&throbberItem.title;" align="center" pack="center">
      <button id="navigator-throbber" oncommand="openRegionURL('messenger.throbber.url')" tooltiptext="&throbber.tooltip;">
          <observes element="broadcaster_throbber" attribute="busy"/>
      </button>
    </toolbaritem>

  </toolbarpalette>

  <toolbar id="composeToolbar2" class="toolbar-primary chromeclass-toolbar"
           toolbarname="Compose" 
           fullscreentoolbar="true" mode="full"
#ifdef XP_MACOSX
           defaultset="button-send,spacer,button-address,spacer,spellingButton,spacer,button-attach,button-security,spacer,button-save,throbber-box"
#else
           defaultset="button-send,spacer,button-address,spacer,spellingButton,spacer,button-attach,button-security,spacer,button-save"
#endif
           customizable="true" context="toolbar-context-menu">
  </toolbar>

  <toolbarset id="customToolbars" context="toolbar-context-menu"/>
  </toolbox>

  <hbox flex="1">
    <vbox id="sidebar-box" persist="sidebarVisible" hidden="true">
      <sidebarheader align="center">
        <label id="sidebar-title" value="&addressesSidebarTitle.label;"/>
        <spacer flex="1"/>
        <toolbarbutton class="ab-closebutton" oncommand="toggleAddressPicker();"/>      
      </sidebarheader>  
      <browser id="sidebar" flex="1" src=""
               style="min-width: 150px; width: 200px; max-width: 400px;"/>         
    </vbox> 

    <splitter id="sidebar-splitter" hidden="true"/>
    
    <vbox flex="1">  
    <toolbox id="headers-box" class="toolbox-top" mode="icons"> 
    <toolbar id="MsgHeadersToolbar" persist="collapsed" flex="1"
             tborient="vertical" tbalign="stretch"
             customizable="true"
             ondragover="nsDragAndDrop.dragOver(event, envelopeDragObserver);"
             ondragdrop="nsDragAndDrop.drop(event, envelopeDragObserver);"
             ondragexit="nsDragAndDrop.dragExit(event, envelopeDragObserver);">
      <hbox id="msgheaderstoolbar-box" flex="1">
        <vbox flex="1" id="addresses-box">
          <hbox align="center">
            <label value="&fromAddr.label;" accesskey="&fromAddr.accesskey;" control="msgIdentity"/>
            <menulist id="msgIdentity" type="description" flex="1" oncommand="LoadIdentity(false);">
              <menupopup id="msgIdentityPopup"/>
            </menulist>
          </hbox> 
          <listbox id="addressingWidget" flex="1" seltype="multiple" rows="4"
                   onkeydown="awKeyDown(event, this)"
                   onclick="awClickEmptySpace(event.originalTarget, true)">
            <listcols>
              <listcol id="typecol-addressingWidget"/>
              <listcol id="textcol-addressingWidget" flex="1"/>
            </listcols>
            <listitem class="addressingWidgetItem" allowevents="true">
              <listcell class="addressingWidgetCell" align="stretch">
                <menulist id="addressCol1#1" disableonsend="true"
                          class="aw-menulist menulist-compact" flex="1"  
                          oncommand="gContentChanged=true; awSetAutoComplete(this.id.slice(this.id.lastIndexOf('#') + 1));">
                  <menupopup>
                    <menuitem value="addr_to" label="&toAddr.label;"/>
                    <menuitem value="addr_cc" label="&ccAddr.label;"/>
                    <menuitem value="addr_bcc" label="&bccAddr.label;"/>
                    <menuitem value="addr_reply" label="&replyAddr.label;"/>
                    <menuitem value="addr_newsgroups" label="&newsgroupsAddr.label;"/>
                    <menuitem value="addr_followup" label="&followupAddr.label;"/>
                  </menupopup>
                </menulist>
              </listcell>
              <listcell class="addressingWidgetCell">
                <textbox id="addressCol2#1" class="plain textbox-addressingWidget uri-element"
                         type="autocomplete" flex="1" 
                         searchSessions="addrbook" timeout="300" maxrows="4" 
                         autoFill="true" autoFillAfterMatch="true" forceComplete="true"
                         minResultsForPopup="3" ignoreBlurWhileSearching="true"
                         ontextentered="awRecipientTextCommand(eventParam, this)"
                         onerrorcommand="awRecipientErrorCommand(eventParam, this)"
                         oninput="gContentChanged=true; setupAutocomplete();" disableonsend="true"
                         onkeypress="awRecipientKeyPress(event, this)"
                         onkeydown="awRecipientKeyDown(event, this)">
                  <image class="person-icon" onclick="this.parentNode.select();"/>
                </textbox>
              </listcell>
            </listitem>
          </listbox>
          <hbox align="center">
            <label value="&subject.label;" accesskey="&subject.accesskey;" control="msgSubject"/>
            <textbox id="msgSubject" flex="1" class="toolbar" disableonsend="true"
                     oninput="gContentChanged=true;SetComposeWindowTitle();"
                     onkeypress="subjectKeyPress(event);" />
          </hbox>
        </vbox>
        <splitter id="attachmentbucket-sizer" collapsed="true" collapse="after"/>
        <vbox id="attachments-box" collapsed="true">
          <label id="attachmentBucketText" value="&attachments.label;" crop="right"
                 accesskey="&attachments.accesskey;" control="attachmentBucket"/>
          <listbox seltype="multiple" id="attachmentBucket" flex="1" rows="4"
                   style="-moz-user-focus: none;"
                   context="msgComposeAttachmentContext"
                   onkeypress="if (event.keyCode == 8 || event.keyCode == 46) RemoveSelectedAttachment();"
                   onclick="AttachmentBucketClicked(event);"/>
        </vbox>
      </hbox>
    </toolbar>   
       
    <!-- These toolbar items get filled out from the editorOverlay -->
    <toolbar class="chromeclass-toolbar" id="FormatToolbar" persist="collapsed" customizable="true">
      <menulist id="ParagraphSelect"/>
      <menulist id="FontFaceSelect"/>
      <stack id="ColorButtons"/>
      <toolbarbutton id="DecreaseFontSizeButton"/>
      <toolbarbutton id="IncreaseFontSizeButton"/>
      <toolbarseparator class="toolbarseparator-standard"/>
      <toolbarbutton id="boldButton"/>
      <toolbarbutton id="italicButton"/>
      <toolbarbutton id="underlineButton"/>
      <toolbarseparator class="toolbarseparator-standard"/>
      <toolbarbutton id="ulButton"/>
      <toolbarbutton id="olButton"/>
      <toolbarbutton id="outdentButton"/>
      <toolbarbutton id="indentButton"/>
      <toolbarseparator class="toolbarseparator-standard"/>
      <toolbarbutton id="AlignPopupButton"/>
      <toolbarbutton id="InsertPopupButton"/>
      <toolbarbutton type="menu" id="smileButtonMenu" padwithspace="true"
                     observes="cmd_smiley"
                     tooltiptext="&SmileButton.tooltip;">
        <menupopup id="smilyPopup">
          <menuitem id="smileySmile" class="menuitem-iconic" label="&smiley1Cmd.label;" 
                    oncommand="doStatefulCommand('cmd_smiley', ':-)'  )"/>
          <menuitem id="smileyFrown" class="menuitem-iconic" label="&smiley2Cmd.label;"
                    oncommand="doStatefulCommand('cmd_smiley', ':-('  )"/>                                              
          <menuitem id="smileyWink" class="menuitem-iconic" label="&smiley3Cmd.label;"
                    oncommand="doStatefulCommand('cmd_smiley', ';-)'  )"/>                       
          <menuitem id="smileyTongue" class="menuitem-iconic" label="&smiley4Cmd.label;"
                    oncommand="doStatefulCommand('cmd_smiley', ':-P'  )"/>
          <menuitem id="smileyLaughing" class="menuitem-iconic" label="&smiley5Cmd.label;"
                    oncommand="doStatefulCommand('cmd_smiley', ':-D'  )"/>
          <menuitem id="smileyEmbarassed" class="menuitem-iconic" label="&smiley6Cmd.label;"
                    oncommand="doStatefulCommand('cmd_smiley', ':-['  )"/>
          <menuitem id="smileyUndecided" class="menuitem-iconic" label="&smiley7Cmd.label;"
                    oncommand="doStatefulCommand('cmd_smiley', ':-\\' )"/>
          <menuitem id="smileySurprise" class="menuitem-iconic" label="&smiley8Cmd.label;"
                    oncommand="doStatefulCommand('cmd_smiley', '=-O' )"/>           
          <menuitem id="smileyKiss" class="menuitem-iconic" label="&smiley9Cmd.label;"
                    oncommand="doStatefulCommand('cmd_smiley', ':-*' )"/>           
          <menuitem id="smileyYell" class="menuitem-iconic" label="&smiley10Cmd.label;"
                    oncommand="doStatefulCommand('cmd_smiley', '>:o' )"/>           
          <menuitem id="smileyCool" class="menuitem-iconic" label="&smiley11Cmd.label;"
                    oncommand="doStatefulCommand('cmd_smiley', '8-)' )"/>           
          <menuitem id="smileyMoney" class="menuitem-iconic" label="&smiley12Cmd.label;"
                    oncommand="doStatefulCommand('cmd_smiley', ':-$' )"/>           
          <menuitem id="smileyFoot" class="menuitem-iconic" label="&smiley13Cmd.label;"
                    oncommand="doStatefulCommand('cmd_smiley', ':-!' )"/>           
          <menuitem id="smileyInnocent" class="menuitem-iconic" label="&smiley14Cmd.label;"
                    oncommand="doStatefulCommand('cmd_smiley', 'O:-)' )"/>           
          <menuitem id="smileyCry" class="menuitem-iconic" label="&smiley15Cmd.label;"
                    oncommand="doStatefulCommand('cmd_smiley', ':\'(' )"/>
          <menuitem id="smileySealed" class="menuitem-iconic" label="&smiley16Cmd.label;"
                    oncommand="doStatefulCommand('cmd_smiley', ':-X' )"/>           
        </menupopup>
      </toolbarbutton>
      <spacer flex="1"/>
    </toolbar>
  </toolbox>

  <splitter id="compose-toolbar-sizer" onmousedown="awSizerListen()" collapse="after"/>

  <!-- The mail message body frame -->
  <vbox id="appcontent" flex="1">
    <editor type="content-primary" id="content-frame" src="about:blank" name="browser.message.body" flex="1"
            context="msgComposeContext"/>
  </vbox>
  
  </vbox>
  </hbox>

  <statusbar id="status-bar" class="chromeclass-status">
    <statusbarpanel id="statusText" flex="1"/>
    <statusbarpanel class="statusbarpanel-progress" id="statusbar-progresspanel">
      <progressmeter id="compose-progressmeter" class="progressmeter-statusbar" mode="normal" value="0"/>
    </statusbarpanel>
  </statusbar>

</window>
